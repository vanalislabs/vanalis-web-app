# REVIEW_000005: Enhance Mock Data for Search Functionality

**Tanggal Review:** 2025-01-12  
**Plan yang Direview:** PLAN_000005  
**Execution yang Direview:** EXECUTION_000005

## Ringkasan

Implementasi perluasan mock data dan perbaikan filter function sudah sesuai dengan rencana dan berfungsi dengan baik. Namun, ditemukan beberapa masalah keselarasan data yang halus yang perlu diperbaiki:

1. **Search Format Mismatch untuk Reward** - Reward disimpan dengan format "5,000 SUI" (dengan koma dan suffix), sehingga pencarian "5000" (tanpa koma) tidak akan match
2. **Search Format Mismatch untuk Price** - Price disimpan sebagai "250" (hanya angka) tetapi ditampilkan sebagai "250 SUI", sehingga pencarian "sui" tidak akan match di price field
3. **Inconsistent Search Behavior** - Pencarian "sui" akan match semua projects karena reward field mengandung " SUI", tetapi tidak akan match datasets karena price field hanya angka

## Temuan Bug

### üü° Medium: Search Format Mismatch untuk Reward Field

**Lokasi:** `src/services/searchService.ts:499`

**Masalah:**
- Reward disimpan dengan format "5,000 SUI" (dengan koma dan suffix " SUI")
- Filter function melakukan search di reward field dengan `project.reward.toLowerCase().includes(lowerQuery)`
- Jika user mencari "5000" (tanpa koma), tidak akan match dengan "5,000 SUI"
- Jika user mencari "5,000" (dengan koma), akan match, tapi ini tidak intuitif

**Kode yang Bermasalah:**
```495:500:src/services/searchService.ts
      return (
        project.title.toLowerCase().includes(lowerQuery) ||
        project.curatorName.toLowerCase().includes(lowerQuery) ||
        project.status.toLowerCase().includes(lowerQuery) ||
        project.reward.toLowerCase().includes(lowerQuery)
      );
```

**Contoh Masalah:**
- User mencari "5000" ‚Üí Tidak match dengan "5,000 SUI"
- User mencari "5,000" ‚Üí Match dengan "5,000 SUI"
- User mencari "sui" ‚Üí Match dengan semua projects (karena semua reward mengandung " SUI")

**Solusi:**
- Opsi 1: Normalize reward field sebelum search (hapus koma dan " SUI" suffix, lalu bandingkan dengan query yang juga dinormalisasi)
- Opsi 2: Extract numeric value dari reward dan bandingkan dengan query numeric
- Opsi 3: Search di normalized version (tanpa koma dan suffix) untuk matching yang lebih baik
- **Rekomendasi:** Opsi 1 - Normalize reward field sebelum search untuk matching yang lebih intuitif

### üü° Medium: Search Format Mismatch untuk Price Field

**Lokasi:** `src/services/searchService.ts:507`

**Masalah:**
- Price disimpan sebagai "250" (hanya angka, string)
- Price ditampilkan sebagai "250 SUI" di UI (dengan suffix " SUI" ditambahkan di component)
- Filter function melakukan search di price field dengan `dataset.price.toLowerCase().includes(lowerQuery)`
- Jika user mencari "250", akan match
- Jika user mencari "sui", tidak akan match karena price field hanya berisi angka

**Kode yang Bermasalah:**
```504:508:src/services/searchService.ts
      return (
        dataset.name.toLowerCase().includes(lowerQuery) ||
        dataset.category.toLowerCase().includes(lowerQuery) ||
        dataset.price.toLowerCase().includes(lowerQuery)
      );
```

**Contoh Masalah:**
- User mencari "250" ‚Üí Match dengan price "250"
- User mencari "sui" ‚Üí Tidak match dengan price field (meskipun ditampilkan sebagai "250 SUI" di UI)
- User mencari "250 sui" ‚Üí Tidak match karena price field hanya "250"

**Solusi:**
- Opsi 1: Tambahkan " sui" ke price field saat search (normalize untuk search)
- Opsi 2: Hapus search di price field jika tidak relevan (hanya search di name dan category)
- Opsi 3: Extract numeric value dan bandingkan dengan query numeric
- **Rekomendasi:** Opsi 1 - Normalize price dengan menambahkan " sui" saat search untuk konsistensi dengan UI

### üü¢ Low: Inconsistent Search Behavior antara Projects dan Datasets

**Lokasi:** `src/services/searchService.ts:495-508`

**Masalah:**
- Pencarian "sui" akan match semua projects karena reward field mengandung " SUI"
- Pencarian "sui" tidak akan match datasets karena price field hanya angka
- Ini menciptakan behavior yang tidak konsisten antara projects dan datasets

**Kode:**
```495:508:src/services/searchService.ts
      return (
        project.title.toLowerCase().includes(lowerQuery) ||
        project.curatorName.toLowerCase().includes(lowerQuery) ||
        project.status.toLowerCase().includes(lowerQuery) ||
        project.reward.toLowerCase().includes(lowerQuery)
      );
    } else if ('name' in item) {
      // DatasetSearchResult
      const dataset = item as DatasetSearchResult;
      return (
        dataset.name.toLowerCase().includes(lowerQuery) ||
        dataset.category.toLowerCase().includes(lowerQuery) ||
        dataset.price.toLowerCase().includes(lowerQuery)
      );
```

**Solusi:**
- Normalize kedua field (reward dan price) dengan cara yang sama untuk konsistensi
- Atau hapus search di reward/price field jika tidak relevan untuk user experience

## Masalah Keselarasan Data

### üü° Medium: Format Data Tidak Konsisten untuk Search

**Masalah:**
1. **Reward Field:**
   - Format: "5,000 SUI" (dengan koma dan suffix)
   - Masalah: Pencarian "5000" tidak match
   - Solusi: Normalize sebelum search (hapus koma dan suffix)

2. **Price Field:**
   - Format: "250" (hanya angka)
   - Display: "250 SUI" (dengan suffix ditambahkan di component)
   - Masalah: Pencarian "sui" tidak match
   - Solusi: Normalize price dengan menambahkan " sui" saat search

3. **Inconsistency:**
   - Projects: reward mengandung " SUI" ‚Üí pencarian "sui" match semua
   - Datasets: price tidak mengandung " SUI" ‚Üí pencarian "sui" tidak match
   - Solusi: Buat konsisten dengan normalize kedua field

### ‚úÖ Tidak Ada Masalah Lain

Semua data types sudah konsisten:
- `ProjectSearchResult`, `DatasetSearchResult`, `UserSearchResult` sudah sesuai dengan mock data
- Type definitions sudah sesuai dengan implementasi
- Mock data memiliki variasi yang cukup (20 items per kategori)
- Activity labels untuk users sudah bervariasi (single dan multiple)

## Over-engineering atau File Terlalu Besar

### ‚úÖ Tidak Ada Masalah

- `searchService.ts` (541 lines) - Wajar karena ada 60 items mock data (20 projects + 20 datasets + 20 users) dan filter function
- Filter function tidak over-engineered, cukup sederhana dan efisien
- Mock data terorganisir dengan baik dan mudah dibaca

## Sintaks atau Gaya yang Aneh

### ‚úÖ Tidak Ada Masalah

- Code style konsisten dengan codebase
- Type guards digunakan dengan benar (`'title' in item`, `'name' in item`, `'username' in item`)
- Filter function menggunakan generic type dengan benar
- Tidak ada sintaks yang aneh atau tidak konsisten

## Perbandingan dengan Rencana

### ‚úÖ Item yang Sudah Diimplementasikan dengan Benar

1. ‚úÖ **Perluas Mock Projects** - 20 items total (dari 6 menjadi 20)
   - Variasi status: open, closing-soon, completed ‚úÖ
   - Variasi kategori: Healthcare, NLP, Computer Vision, Audio, Finance, Autonomous Driving, E-commerce, Agriculture, Robotics ‚úÖ
   - Variasi reward: 3,200 SUI sampai 15,000 SUI ‚úÖ
   - Variasi submissions: 134 sampai 2,100 ‚úÖ
   - Variasi curator names ‚úÖ

2. ‚úÖ **Perluas Mock Datasets** - 20 items total (dari 6 menjadi 20)
   - Variasi categories: Healthcare, NLP, Computer Vision, Audio, Finance, Autonomous Driving, E-commerce, Agriculture, Robotics ‚úÖ
   - Variasi prices: 150 SUI sampai 720 SUI ‚úÖ
   - Variasi items count: 5,000 sampai 50,000 items ‚úÖ
   - Variasi names yang deskriptif ‚úÖ

3. ‚úÖ **Perluas Mock Users** - 20 items total (dari 6 menjadi 20)
   - Variasi activity labels: Single dan multiple combinations ‚úÖ
   - Variasi usernames: nama, nickname, professional ‚úÖ
   - Variasi addresses: Format 0x... ‚úÖ
   - Catatan: Activity labels (bukan role terikat) sudah diimplementasikan dengan benar ‚úÖ

4. ‚úÖ **Perbaiki Filter Function** - Multi-field search diimplementasikan
   - Projects: title, curatorName, status, reward ‚úÖ
   - Datasets: name, category, price ‚úÖ
   - Users: username, address, activity labels (roles field) ‚úÖ
   - Case-insensitive search ‚úÖ
   - Partial matching ‚úÖ

5. ‚úÖ **Variasi Data Realistis**
   - Naming realistis dan sesuai domain AI/ML ‚úÖ
   - Kategori mencerminkan real-world use cases ‚úÖ
   - Numbers realistis (reward, submissions, prices, items count) ‚úÖ

### ‚ö†Ô∏è Item yang Perlu Diperbaiki

1. ‚ö†Ô∏è **Search Format Normalization** - Belum diimplementasikan
   - Reward field: Perlu normalize (hapus koma dan suffix) untuk matching yang lebih baik
   - Price field: Perlu normalize (tambahkan " sui") untuk konsistensi dengan UI
   - Ini tidak disebutkan di plan, tapi merupakan improvement yang penting untuk user experience

## Rekomendasi Perbaikan

### Prioritas Sedang (Sebaiknya Diperbaiki)

1. **Normalize Reward Field untuk Search**
   - Normalize reward field sebelum search (hapus koma dan " SUI" suffix)
   - File: `src/services/searchService.ts`
   - Fungsi: `filterByQuery` untuk ProjectSearchResult
   - Contoh: "5,000 SUI" ‚Üí normalize menjadi "5000" untuk search
   - Query "5000" akan match dengan "5,000 SUI"

2. **Normalize Price Field untuk Search**
   - Normalize price field dengan menambahkan " sui" saat search untuk konsistensi dengan UI
   - File: `src/services/searchService.ts`
   - Fungsi: `filterByQuery` untuk DatasetSearchResult
   - Contoh: "250" ‚Üí normalize menjadi "250 sui" untuk search
   - Query "sui" akan match dengan price field

3. **Konsistensi Search Behavior**
   - Buat search behavior konsisten antara projects dan datasets
   - Normalize kedua field dengan cara yang sama
   - File: `src/services/searchService.ts`

### Prioritas Rendah (Nice to Have)

4. **Fuzzy Matching (Optional)**
   - Plan menyebutkan fuzzy matching sebagai optional
   - Bisa ditambahkan di masa depan untuk typo tolerance
   - Tidak critical untuk sekarang

## Testing yang Perlu Dilakukan

Setelah perbaikan, perlu testing untuk:

1. ‚úÖ Mock data memiliki 20 items per kategori (sudah OK)
2. ‚úÖ Search bisa menemukan items berdasarkan multiple fields (sudah OK)
3. ‚ö†Ô∏è Search "5000" match dengan "5,000 SUI" (perlu perbaikan)
4. ‚ö†Ô∏è Search "sui" match dengan price field (perlu perbaikan)
5. ‚úÖ Partial matching bekerja (sudah OK)
6. ‚úÖ Case-insensitive search bekerja (sudah OK)
7. ‚úÖ Loading state ditampilkan (sudah OK)
8. ‚úÖ Empty state ditampilkan (sudah OK)
9. ‚úÖ Debounce functionality bekerja (sudah OK)
10. ‚ö†Ô∏è Search behavior konsisten antara projects dan datasets (perlu perbaikan)

## Kesimpulan

Implementasi perluasan mock data dan perbaikan filter function sudah sangat baik dan sesuai dengan rencana:

1. ‚úÖ **Mock Data Expansion:** 20 items per kategori dengan variasi yang cukup
2. ‚úÖ **Multi-field Search:** Sudah diimplementasikan dengan benar
3. ‚úÖ **Filter Function:** Sudah diperbaiki untuk multi-field search
4. ‚úÖ **Data Variasi:** Realistis dan sesuai domain AI/ML
5. ‚ö†Ô∏è **Search Format:** Perlu normalisasi untuk matching yang lebih baik

**Status:** ‚úÖ **IMPLEMENTASI SESUAI RENCANA** dengan beberapa improvement yang disarankan untuk user experience yang lebih baik.

**Rekomendasi:** Perbaiki search format normalization untuk reward dan price field agar search behavior lebih intuitif dan konsisten. Ini tidak critical tapi akan meningkatkan user experience secara signifikan.

